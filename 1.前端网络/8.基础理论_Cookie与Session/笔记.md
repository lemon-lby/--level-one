# Cookie与Session


## cookie

1. 如果我们用JS的变量来存数据，那么在页面关闭的时候，数据就消失了。
   
2. 保持登陆状态是怎么做到的呢

按照正常的HTTP协议来说，是做不到的
因为HTTP协议，上下文无关协议

3. 所以说前端页面上，有可以持久化储存数据的东西，一旦登陆成功，就记载在这个里面。

Cookie是有限制的。
Cookie是存在浏览器里的，不是存在某个页面上的。是可以长期存储的。Cookie即使是保存在浏览器里，也是存放在不同的域名下的

缺点：如果某个坏人复制了我浏览器里的Cookie，他就可以在他的电脑上登陆我的账号

## session 

登录信息存在服务器端，不会被坏人复制走

缺点：如果用户量非常大，上亿的用户，在用户量很大的时候，服务器端很耗资源的

    因为后端可能不止一台服务器，用户的登录信息，一般只存在一台服务器上。
    因为用户的登录操作，在哪台机器上执行的，就一般存在哪台机器上
    需要通过反向代理。(轮询、IP哈希。)


## 登录过程(Cookie)

1. 初始状态：没有登陆
2. 访问百度的登陆:输入用户名，密码
3. 如果用户名和密码是正确的，百度的后缀会向这个域名下，设置一个Cookie。，写入用户的基本信息(加密的)
4. 以后每一次向百度发送请求，浏览器都会自动带上这些cookie
5. 服务端(后端)，看到了带有ID的Cookie，就可以解析这个加密的ID，来获取到这个用户本身的ID.
6. 如果能获取到本身的ID，那么就证明这个用户已经登陆过了，所以后端可以继续保留用户的信息。



XSS注入攻击。